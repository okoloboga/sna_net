# JungAI Backend API

## –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–ë–∞–∑–æ–≤—ã–π URL:** `http://{host}:{port}` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `http://localhost:8000`)
- **–í–µ—Ä—Å–∏—è API:** `v1`
- **–ü—Ä–µ—Ñ–∏–∫—Å –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:** `/api/v1`
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** JWT Bearer. –î–µ–π—Å—Ç–≤—É—é—â–∏–π `access_token` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`.
- –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã, –ø–æ–º–µ—á–µ–Ω–Ω—ã–µ –∫–∞–∫ ¬´–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ email¬ª, –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `VerifiedUser` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email.

---

## –°–ª—É–∂–µ–±–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### GET `/`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ 200**
```json
{
  "service": "JungAI Backend API",
  "version": "1.0.0",
  "status": "running"
}
```

### GET `/health`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Health-check –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ 200**
```json
{
  "status": "ok",
  "service": "backend",
  "version": "1.0.0"
}
```

---

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º (`/api/v1/auth`)

### POST `/api/v1/auth/register`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email/–ø–∞—Ä–æ–ª—é.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  {
    "email": "user@example.com",
    "password": "S3curePassw0rd",
    "first_name": "Carl",
    "last_name": "Jung",
    "timezone": "Europe/Moscow"
  }
  ```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞**
```bash
curl -X POST http://localhost:8000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
        "email": "user@example.com",
        "password": "S3curePassw0rd",
        "first_name": "Carl",
        "last_name": "Jung",
        "timezone": "Europe/Moscow"
      }'
```

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç 201**
```json
{
  "access_token": "<jwt>",
  "refresh_token": "<jwt>",
  "token_type": "bearer"
}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏**
- `400` ‚Äî email —É–∂–µ –∑–∞–Ω—è—Ç.
- `422` ‚Äî –ø–µ—Ä–µ–¥–∞–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `timezone` (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IANA-–Ω–∞–∑–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `Europe/Moscow` –∏–ª–∏ `UTC`).
- `500` ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

---

### POST `/api/v1/auth/login`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ email/–ø–∞—Ä–æ–ª—é.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** –∫–∞–∫ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –Ω–æ —Ç–æ–ª—å–∫–æ `email` –∏ `password`.

```bash
curl -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
        "email": "user@example.com",
        "password": "S3curePassw0rd"
      }'
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "access_token": "<jwt>",
  "refresh_token": "<jwt>",
  "token_type": "bearer"
}
```

**–û—à–∏–±–∫–∏**
- `401` ‚Äî –Ω–µ–≤–µ—Ä–Ω–∞—è –ø–∞—Ä–∞ email/–ø–∞—Ä–æ–ª—å.
- `403` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.

---

### POST `/api/v1/auth/refresh`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ refresh-token.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è refresh-token –≤ —Ç–µ–ª–µ.

```bash
curl -X POST http://localhost:8000/api/v1/auth/refresh \
  -H "Content-Type: application/json" \
  -d '{
        "refresh_token": "<refresh_jwt>"
      }'
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "access_token": "<new_access_jwt>",
  "refresh_token": "<new_refresh_jwt>",
  "token_type": "bearer"
}
```

**–û—à–∏–±–∫–∏**
- `401` ‚Äî —Ç–æ–∫–µ–Ω –ø—Ä–æ—Å—Ä–æ—á–µ–Ω –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.

---

### GET `/api/v1/auth/verify-email`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –ø–æ —Ç–æ–∫–µ–Ω—É –∏–∑ –ø–∏—Å—å–º–∞.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:** `token` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π).

```bash
curl "http://localhost:8000/api/v1/auth/verify-email?token=<verification_token>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "Email successfully verified"
}
```

**–û—à–∏–±–∫–∏**
- `400` ‚Äî —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏–ª–∏ –∏—Å—Ç—ë–∫.

---

### POST `/api/v1/auth/resend-verification`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  {
    "email": "user@example.com"
  }
  ```

```bash
curl -X POST http://localhost:8000/api/v1/auth/resend-verification \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com"}'
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "Verification email has been sent"
}
```

**–û—à–∏–±–∫–∏**
- `400` ‚Äî email —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω.
- `500` ‚Äî –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–∏—Å—å–º–∞.

---

### POST `/api/v1/auth/forgot-password`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—Ä–æ—Å –Ω–∞ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

```bash
curl -X POST http://localhost:8000/api/v1/auth/forgot-password \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com"}'
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "If the email exists, password reset email has been sent"
}
```

**–û—à–∏–±–∫–∏**
- `400` ‚Äî –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω —á–µ—Ä–µ–∑ OAuth2, –ø–∞—Ä–æ–ª—å —Å–±—Ä–æ—Å–∏—Ç—å –Ω–µ–ª—å–∑—è.
- `500` ‚Äî –æ—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å—å–º–∞.

---

### POST `/api/v1/auth/reset-password`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ —Ç–æ–∫–µ–Ω—É –∏–∑ –ø–∏—Å—å–º–∞.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

```bash
curl -X POST http://localhost:8000/api/v1/auth/reset-password \
  -H "Content-Type: application/json" \
  -d '{
        "token": "<reset_token>",
        "new_password": "N3wS3curePassw0rd"
      }'
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "Password successfully reset"
}
```

**–û—à–∏–±–∫–∏**
- `400` ‚Äî —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏–ª–∏ –∏—Å—Ç—ë–∫.
- `500` ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.

---

### DELETE `/api/v1/auth/account`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** —Ç—Ä–µ–±—É–µ—Ç—Å—è `access_token` (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π email).

```bash
curl -X DELETE http://localhost:8000/api/v1/auth/account \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "Account successfully deleted"
}
```

**–û—à–∏–±–∫–∏**
- `500` ‚Äî –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏.

---

### POST `/api/v1/auth/logout`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (—Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ–∫–µ–Ω–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç).
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.

```bash
curl -X POST http://localhost:8000/api/v1/auth/logout
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "Successfully logged out"
}
```

---

## –°–Ω—ã (`/api/v1/dreams`) ‚Äî **—Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ email**

### POST `/api/v1/dreams`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–Ω–∞.
- **–õ–∏–º–∏—Ç—ã:** –Ω–µ –±–æ–ª–µ–µ 5 –∑–∞–ø–∏—Å–µ–π –≤ —Å—É—Ç–∫–∏ (–ø–æ —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

```bash
curl -X POST http://localhost:8000/api/v1/dreams \
  -H "Authorization: Bearer <access_jwt>" \
  -H "Content-Type: application/json" \
  -d '{
        "title": "–°–æ–Ω –ø—Ä–æ –ª–µ—Å",
        "content": "–ú–Ω–µ —Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ —è –≥—É–ª—è—é –ø–æ —Ç—ë–º–Ω–æ–º—É —Å–æ—Å–Ω–æ–≤–æ–º—É –ª–µ—Å—É...",
        "emoji": "üå≤",
        "comment": "–ü–æ–∫–∞–∑–∞–ª—Å—è –≤–∞–∂–Ω—ã–º"
      }'
```

**–û—Ç–≤–µ—Ç 201**
```json
{
  "id": "d2d39523-2f6a-46a8-a2c8-1a0e41285672",
  "user_id": "44cb8dca-4b02-425d-ba33-48423ab2fd0f",
  "title": "–°–æ–Ω –ø—Ä–æ –ª–µ—Å",
  "content": "–ú–Ω–µ —Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ —è –≥—É–ª—è—é –ø–æ —Ç—ë–º–Ω–æ–º—É —Å–æ—Å–Ω–æ–≤–æ–º—É –ª–µ—Å—É...",
  "emoji": "üå≤",
  "comment": "–ü–æ–∫–∞–∑–∞–ª—Å—è –≤–∞–∂–Ω—ã–º",
  "cover_url": "",
  "recorded_at": "2025-11-11T08:20:11.123Z",
  "created_at": "2025-11-11T08:20:11.123Z",
  "updated_at": "2025-11-11T08:20:11.123Z",
  "has_analysis": false
}
```

**–û—à–∏–±–∫–∏**
- `429` ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç.
- `500` ‚Äî –æ—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è.

---

### GET `/api/v1/dreams`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
  - `page` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1`, `>=1`)
  - `page_size` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `10`, `1-100`)

```bash
curl "http://localhost:8000/api/v1/dreams?page=1&page_size=10" \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "dreams": [
    {
      "id": "677d8a55-73b5-473b-9f04-cb1a3f138ed5",
      "user_id": "3097c78e-5fbc-4237-b32c-a7fb3ca6f625",
      "title": "–í—Ç–æ—Ä–æ–π —Å–æ–Ω",
      "content": "–Ø –µ—Ö–∞–ª –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ –ø–æ –ª—É–Ω–Ω–æ–º—É —Å–≤–µ—Ç—É.",
      "emoji": "üö¥",
      "comment": "–ó–∞–ø–æ–º–Ω–∏–ª –∫–∞–∂–¥—É—é –¥–µ—Ç–∞–ª—å",
      "cover_url": "",
      "recorded_at": "2025-11-11T11:40:47.022401Z",
      "created_at": "2025-11-11T11:40:47.022409Z",
      "updated_at": "2025-11-11T11:40:47.022411Z",
      "has_analysis": false
    },
    {
      "id": "d7770dca-f548-49d8-be18-54be4c4f85f2",
      "user_id": "3097c78e-5fbc-4237-b32c-a7fb3ca6f625",
      "title": "–ü–µ—Ä–≤—ã–π —Å–æ–Ω",
      "content": "–Ø –≥—É–ª—è–ª –ø–æ —Å–∞–¥—É –∏ –≤—Å—Ç—Ä–µ—Ç–∏–ª –≥–æ–≤–æ—Ä—è—â—É—é –ø—Ç–∏—Ü—É.",
      "emoji": "üê¶",
      "comment": "–û—á–µ–Ω—å —è—Ä–∫–∏–π —Å–æ–Ω",
      "cover_url": "",
      "recorded_at": "2025-11-11T11:40:28.098680Z",
      "created_at": "2025-11-11T11:40:28.098683Z",
      "updated_at": "2025-11-11T11:40:28.098683Z",
      "has_analysis": false
    }
  ],
  "total": 2,
  "page": 1,
  "page_size": 10,
  "total_pages": 1
}
```

**–û—à–∏–±–∫–∏**
- `500` ‚Äî –æ—à–∏–±–∫–∞ –≤—ã–±–æ—Ä–∫–∏ –∏–∑ –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è).

---

### GET `/api/v1/dreams/search`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É, –∑–∞–≥–æ–ª–æ–≤–∫—É –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—é.
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `q` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–∏—Å–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è, –¥–ª–∏–Ω–∞ ‚â• 1).

```bash
curl "http://localhost:8000/api/v1/dreams/search?q=–ª–µ—Å" \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "dreams": [...],
  "total": 3,
  "query": "–ª–µ—Å"
}
```

---

### GET `/api/v1/dreams/{dream_id}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–æ–Ω –ø–æ ID.

```bash
curl http://localhost:8000/api/v1/dreams/d2d39523-2f6a-46a8-a2c8-1a0e41285672 \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—à–∏–±–∫–∏**
- `404` ‚Äî —Å–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

### PUT `/api/v1/dreams/{dream_id}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å–Ω–∞ (`title`, `content`, `emoji`, `comment`).

```bash
curl -X PUT http://localhost:8000/api/v1/dreams/d2d3... \
  -H "Authorization: Bearer <access_jwt>" \
  -H "Content-Type: application/json" \
  -d '{
        "comment": "–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ–ª ‚Äî –Ω–µ —Ç–∞–∫–æ–π —É–∂ –≤–∞–∂–Ω—ã–π",
        "emoji": "üåå"
      }'
```

**–û—à–∏–±–∫–∏**
- `404` ‚Äî —Å–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω.
- `500` ‚Äî –æ—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

---

### DELETE `/api/v1/dreams/{dream_id}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω–∏–µ —Å–Ω–∞ –∏ —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, –æ—á–∏—Å—Ç–∫–∞ –æ–±–ª–æ–∂–∫–∏ –≤ S3.

```bash
curl -X DELETE http://localhost:8000/api/v1/dreams/d2d3... \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "message": "Dream successfully deleted"
}
```

---

### POST `/api/v1/dreams/{dream_id}/cover`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞/–∑–∞–º–µ–Ω–∞ –æ–±–ª–æ–∂–∫–∏ —Å–Ω–∞.
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** JPEG/PNG, ‚â§ 5 –ú–ë.
- **–§–æ—Ä–º–∞—Ç:** multipart/form-data, –ø–æ–ª–µ `file`.

```bash
curl -X POST http://localhost:8000/api/v1/dreams/d2d3.../cover \
  -H "Authorization: Bearer <access_jwt>" \
  -F "file=@/path/to/cover.png"
```

**–û—à–∏–±–∫–∏**
- `400` ‚Äî –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π MIME-—Ç–∏–ø.
- `413` ‚Äî —Ñ–∞–π–ª –±–æ–ª—å—à–µ 5 –ú–ë.
- `404` ‚Äî —Å–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω.
- `500` ‚Äî –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏.

---

## –ê–Ω–∞–ª–∏–∑—ã (`/api/v1/analyses`) ‚Äî **—Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ email**

### POST `/api/v1/analyses`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –¥–ª—è —Å–Ω–∞. –û–¥–∏–Ω —Å–æ–Ω ‚Üí –æ–¥–∏–Ω –∞–Ω–∞–ª–∏–∑.
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
  ```json
  {
    "dream_id": "d2d39523-2f6a-46a8-a2c8-1a0e41285672"
  }
  ```

```bash
curl -X POST http://localhost:8000/api/v1/analyses \
  -H "Authorization: Bearer <access_jwt>" \
  -H "Content-Type: application/json" \
  -d '{"dream_id": "d2d3..."}'
```

**–û—Ç–≤–µ—Ç 202**
```json
{
  "analysis_id": "d82d0a6f-8d1d-4af9-8d7d-4d8f99cd18f5",
  "task_id": "5cfb22a6-4f38-4b6e-95b7-0e8dbe7d5a45",
  "status": "pending",
  "message": "Analysis task created. Use task_id to check status."
}
```

**–û—à–∏–±–∫–∏**
- `404` ‚Äî —Å–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
- `409` ‚Äî –∞–Ω–∞–ª–∏–∑ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
- `500` ‚Äî –æ—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á–∏.

---

### GET `/api/v1/analyses/task/{task_id}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Celery-–∑–∞–¥–∞—á–∏.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Å—Ç–∞—Ç—É—Å—ã:** `PENDING`, `PROCESSING`, `COMPLETED`, `FAILED` (–ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ Celery).

```bash
curl http://localhost:8000/api/v1/analyses/task/5cfb22a6-4f38-4b6e-95b7-0e8dbe7d5a45 \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "task_id": "5cfb22a6-4f38-4b6e-95b7-0e8dbe7d5a45",
  "status": "SUCCESS",
  "result": "–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–Ω–∞...",
  "error": null,
  "progress": null
}
```

**–û—à–∏–±–∫–∏**
- `500` ‚Äî Celery –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ task_id –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.

---

### GET `/api/v1/analyses/dream/{dream_id}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ø–æ ID —Å–Ω–∞.

```bash
curl http://localhost:8000/api/v1/analyses/dream/d2d3... \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "id": "d82d0a6f-8d1d-4af9-8d7d-4d8f99cd18f5",
  "dream_id": "d2d39523-2f6a-46a8-a2c8-1a0e41285672",
  "user_id": "44cb8dca-4b02-425d-ba33-48423ab2fd0f",
  "result": "–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–Ω–∞...",
  "status": "completed",
  "error_message": null,
  "created_at": "2025-11-11T08:25:11.784Z",
  "completed_at": "2025-11-11T08:25:45.012Z"
}
```

**–û—à–∏–±–∫–∏**
- `404` ‚Äî –∞–Ω–∞–ª–∏–∑ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

---

### GET `/api/v1/analyses/{analysis_id}`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ø–æ –µ–≥–æ ID.
- **–û—à–∏–±–∫–∏:** `404` ‚Äî –∞–Ω–∞–ª–∏–∑ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

### GET `/api/v1/analyses`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–Ω–∞–ª–∏–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–∏–º–∏—Ç 100, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è).

```bash
curl http://localhost:8000/api/v1/analyses \
  -H "Authorization: Bearer <access_jwt>"
```

**–û—Ç–≤–µ—Ç 200**
```json
{
  "analyses": [
    {
      "id": "d82d0a6f-8d1d-4af9-8d7d-4d8f99cd18f5",
      "dream_id": "d2d3...",
      "user_id": "44cb8dca-...",
      "result": "–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–Ω–∞...",
      "status": "completed",
      "error_message": null,
      "created_at": "2025-11-11T08:25:11.784Z",
      "completed_at": "2025-11-11T08:25:45.012Z"
    }
  ],
  "total": 1
}
```

**–û—à–∏–±–∫–∏**
- `500` ‚Äî –æ—à–∏–±–∫–∞ –≤—ã–±–æ—Ä–∫–∏ –∏–∑ –ë–î.

---

## –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
- –í—Å–µ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ JSON –∫–æ–¥–∏—Ä—É—é—Ç—Å—è –≤ UTF-8.
- –î–ª—è multipart-–∑–∞–≥—Ä—É–∑–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ MIME-—Ç–∏–ø—ã (`image/jpeg`, `image/png`).
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Celery —Å—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á —Ä–µ–≥–∏—Å—Ç—Ä–æ–∑–∞–≤–∏—Å–∏–º—ã ‚Äî –∫–ª–∏–µ–Ω—Ç—É —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `PENDING`, `STARTED/PROCESSING`, `SUCCESS/COMPLETED`, `FAILURE/FAILED`.

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Refresh-token —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (—Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–µ—Ç).
- –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (—Å–Ω—ã, –∞–Ω–∞–ª–∏–∑—ã, OAuth-–∞–∫–∫–∞—É–Ω—Ç—ã).
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (URL –ë–î, –∫–ª—é—á–∏ JWT, SMTP –∏ —Ç.–¥.) –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ `.env` –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.


